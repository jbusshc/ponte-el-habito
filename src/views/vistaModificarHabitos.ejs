<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= titulo %></title>
    <link rel="stylesheet" href="/css/ModificarHabitos.css">
</head>
<body>
    <%- include('partial/_header') %>  <!-- Incluir el header -->
    
    <main>
        <h1>Modificar Hábito</h1>

        <!-- Listbox para seleccionar los hábitos -->
        <label for="habit-listbox">Seleccione un hábito para modificar:</label>
        <select id="habit-listbox">
            <option value="" disabled selected>Seleccione un hábito</option>
            <% habitos.forEach(habito => { %>
                <option value="<%= habito.HABITO_ID %>">
                    <%= habito.HABITO_NOM %>
                </option>
            <% }) %>
        </select>
        
        <!-- Textboxes to display selected habit information -->
        <div id="habit-info" style="display: none;">
            <label for="habitoNombre">Nombre del Hábito:</label>
            <input type="text" id="habitoNombre" name="habitoNombre" readonly>
            <br>
            <label for="habitoTipo">Tipo del Hábito:</label>
            <input type="text" id="habitoTipo" name="habitoTipo" readonly>
        </div>
    </main>

    <%- include('partial/_footer') %>  <!-- Incluir el footer -->

    <script>
        document.getElementById('habit-listbox').addEventListener('change', async function() {
            const habitId = this.value;
            if (habitId) {
                try {
                    const response = await fetch(`/api/habitos/${habitId}`);
                    const habito = await response.json();
                    if (habito) {
                        document.getElementById('habitoNombre').value = habito.HABITO_NOM;
                        document.getElementById('habitoTipo').value = habito.HABITO_TIPO;
                        document.getElementById('habit-info').style.display = 'block';
                    }
                } catch (error) {
                    console.error('Error al obtener el hábito:', error);
                }
            }
        });
    </script>

    <%- include('partial/_footer') %>  <!-- Incluir el footer -->
</body>
</html>
